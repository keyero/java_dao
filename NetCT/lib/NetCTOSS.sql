--数据库全部操作
drop table ACCOUNT;
create table ACCOUNT(
ID NUMBER(9, 0),
LOGIN_NAME VARCHAR(30),
LOGIN_PASSWD VARCHAR(30) not null,
STATUS CHAR(1) not null,
CREATE_DATE DATE not null,
PAUSE_DATE DATE,
CLOSE_DATE DATE,
REAL_NAME VARCHAR(20) not null,
IDCARD CHAR(18) not null,
BIRTHDATE DATE,
GENDER CHAR(1) not null,
OCCUPATION VARCHAR(50),
TELEPHONE VARCHAR(15) not null,
EMAIL VARCHAR(50),
MAILADDRESS VARCHAR(50),
ZIPCODE CHAR(6),
QQ VARCHAR(15)
);

drop table BILL;
create table BILL(
ID NUMBER(11, 0),
ACCOUNT_ID NUMBER(9, 0) not null,
BILL_MONTH CHAR(6) not null,
COST NUMBER(13, 2) not null,
PAYMENT_MODE CHAR(1),
PAY_STATUS CHAR(1) not null,
constraint PK_BILL primary key(ID)
);

drop table BILL_ITEM;
create table BILL_ITEM(
ID NUMBER(11, 0),
BILL_ID NUMBER(11, 0) not null,
SERVICE_ID NUMBER(10, 0) not null,
COST NUMBER(13, 2) not null,
constraint PK_BILL_ITEM primary key(ID)
);

drop table COST;
create table COST(
ID NUMBER(4, 0),
COST_NAME VARCHAR(50) not null,
BASE_DURATION NUMBER(11, 0),
BASE_COST NUMBER(7, 2),
UNIT_COST NUMBER(7, 4),
STATUS CHAR(1) not null,
DESCR VARCHAR(100),
CREATE_DATE DATE not null,
PAUSE_DATE DATE,
CLOSE_DATE DATE,
COST_TYPE CHAR(1) not null,
constraint PK_COST primary key(ID)
);

drop table SERVICE;
create table SERVICE(
ID NUMBER(10, 0),
ACCOUNT_ID NUMBER(9, 0) not null,
COST_ID NUMBER(4, 0) not null,
UNIX_HOST VARCHAR(15) not null,
OS_USERNAME VARCHAR(8) not null,
LOGIN_PASSWD VARCHAR(8) not null,
STATUS CHAR(1) not null,
CREATE_DATE DATE not null,
PAUSE_DATE DATE,
CLOSE_DATE DATE,
constraint PK_SERVICE primary key(ID)
);

drop table SERVICE_DETAIL;
create table SERVICE_DETAIL(
ID NUMBER(11, 0),
SERVICE_ID NUMBER(10, 0) not null,
CLIENT_HOST VARCHAR(15) not null,
UNIX_HOST VARCHAR(15) not null,
OS_USERNAME VARCHAR(8) not null,
PID VARCHAR(11),
LOGIN_TIME DATE,
LOGOUT_TIME DATE not null,
DURATION NUMBER(20, 9) not null,
COST NUMBER(20, 6),
constraint PK_SERVICE_DETAIL primary key(ID)
);

--约束限制
create unique index PK_ACCOUNT on ACCOUNT(ID);
create index I_ACCOUNT_REAL_NAME on ACCOUNT(REAL_NAME);
create index I_A on ACCOUNT(TELEPHONE);
create unique index PK_BILL on BILL(ID);
create unique index PK_BILL_ITEM on BILL_ITEM(ID);
create unique index PK_COST on COST(ID);
create unique index PK_SERVICE on SERVICE(ID);
create unique index PK_SERVICE_DETAIL on SERVICE_DETAIL(ID);

alter table ACCOUNT add constraint PK_ACCOUNT primary key(ID);
alter table ACCOUNT modify(LOGIN_NAME not null);
alter table BILL_ITEM add constraint FK_BILL_TIME_BILL foreign key(BILL_ID) references BILL(ID);


--测试数据
insert into ACCOUNT (ID,LOGIN_NAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,REAL_NAME,IDCARD,BIRTHDATE,GENDER,OCCUPATION,TELEPHONE,EMAIL,MAILADDRESS,ZIPCODE,QQ) values (100000000,'taiji001','256528','0',to_date('15-3月 -08','DD-MON-RR'),null,null,'zhangsanfeng','410381194302256528',to_date('25-2月 -43','DD-MON-RR'),'0',null,'13669351234',null,null,null,null);
insert into ACCOUNT (ID,LOGIN_NAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,REAL_NAME,IDCARD,BIRTHDATE,GENDER,OCCUPATION,TELEPHONE,EMAIL,MAILADDRESS,ZIPCODE,QQ) values (100000001,'xl18z60','190613','1',to_date('10-1月 -09','DD-MON-RR'),null,null,'guojing','330682196903190613',to_date('19-3月 -69','DD-MON-RR'),'0',null,'13338924567',null,null,null,null);
insert into ACCOUNT (ID,LOGIN_NAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,REAL_NAME,IDCARD,BIRTHDATE,GENDER,OCCUPATION,TELEPHONE,EMAIL,MAILADDRESS,ZIPCODE,QQ) values (100000002,'DGBF70','270429','1',to_date('01-3月 -09','DD-MON-RR'),null,null,'HUANGRONG','330902197108270429',to_date('27-8月 -71','DD-MON-RR'),'1',null,'13637811357',null,null,null,null);
insert into ACCOUNT (ID,LOGIN_NAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,REAL_NAME,IDCARD,BIRTHDATE,GENDER,OCCUPATION,TELEPHONE,EMAIL,MAILADDRESS,ZIPCODE,QQ) values (100000003,'mjjzh64','041115','1',to_date('12-3月 -10','DD-MON-RR'),null,null,'zhangwuji','610121198906041115',to_date('04-6月 -89','DD-MON-RR'),'0',null,'13572952468',null,null,null,null);
insert into ACCOUNT (ID,LOGIN_NAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,REAL_NAME,IDCARD,BIRTHDATE,GENDER,OCCUPATION,TELEPHONE,EMAIL,MAILADDRESS,ZIPCODE,QQ) values (100000004,'jmdxj00','010322','0',to_date('01-1月 -11','DD-MON-RR'),null,null,'guofurong','350581199601010322',to_date('01-1月 -96','DD-MON-RR'),'1',null,'18617832562',null,null,null,null);
insert into ACCOUNT (ID,LOGIN_NAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,REAL_NAME,IDCARD,BIRTHDATE,GENDER,OCCUPATION,TELEPHONE,EMAIL,MAILADDRESS,ZIPCODE,QQ) values (100000005,'ljxj90','310346','0',to_date('01-2月 -12','DD-MON-RR'),null,null,'luwushuang','320211199307310346',to_date('31-7月 -93','DD-MON-RR'),'1',null,'13186454984',null,null,null,null);
insert into ACCOUNT (ID,LOGIN_NAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,REAL_NAME,IDCARD,BIRTHDATE,GENDER,OCCUPATION,TELEPHONE,EMAIL,MAILADDRESS,ZIPCODE,QQ) values (100000006,'kxhxd20','012115','0',to_date('20-2月 -12','DD-MON-RR'),null,null,'weixiaobao','321022200010012115',to_date('01-10月-00','DD-MON-RR'),'0',null,'13953410078',null,null,null,null);
insert into ACCOUNT (ID,LOGIN_NAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,REAL_NAME,IDCARD,BIRTHDATE,GENDER,OCCUPATION,TELEPHONE,EMAIL,MAILADDRESS,ZIPCODE,QQ) values (100000007,'kxhxd20','012115','0',to_date('20-2月 -12','DD-MON-RR'),null,null,'weixiaobao','321022200010012115',to_date('01-10月-00','DD-MON-RR'),'0',null,'13953410078',null,null,null,null);

insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1000,'5.9元套餐',20,5.9,0.4,'0','5.9元20小时/月,超出部分0.4元/时',to_date('25-10月-13','DD-MON-RR'),null,null,'2');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1001,'6.9元套餐',40,6.9,0.3,'0','6.9元40小时/月,超出部分0.3元/时',to_date('25-10月-13','DD-MON-RR'),null,null,'2');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1002,'8.5元套餐',100,8.5,0.2,'0','8.5元100小时/月,超出部分0.2元/时',to_date('25-10月-13','DD-MON-RR'),null,null,'2');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1003,'10.5元套餐',200,10.5,0.1,'0','10.5元200小时/月,超出部分0.1元/时',to_date('25-10月-13','DD-MON-RR'),null,null,'2');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1004,'计时收费',null,null,0.5,'0','0.5元/时,不使用不收费',to_date('25-10月-13','DD-MON-RR'),null,null,'3');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1005,'包月',null,20,null,'0','每月20元,不限制使用时间',to_date('25-10月-13','DD-MON-RR'),null,null,'1');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1015,'6.9元套餐',40,6.9,0.3,'0','6.9元40小时/月,超出部分0.3元/时',to_date('25-10月-13','DD-MON-RR'),null,null,'2');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1016,'8.5元套餐',100,8.5,0.2,'0','8.5元100小时/月,超出部分0.2元/时',to_date('25-10月-13','DD-MON-RR'),null,null,'2');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1017,'10.5元套餐',200,10.5,0.1,'0','10.5元200小时/月,超出部分0.1元/时',to_date('25-10月-13','DD-MON-RR'),null,null,'2');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1018,'计时收费',null,null,0.5,'0','0.5元/时,不使用不收费',to_date('25-10月-13','DD-MON-RR'),null,null,'3');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1019,'包月',null,20,null,'0','每月20元,不限制使用时间',to_date('25-10月-13','DD-MON-RR'),null,null,'1');
insert into COST (ID,COST_NAME,BASE_DURATION,BASE_COST,UNIT_COST,STATUS,DESCR,CREATE_DATE,PAUSE_DATE,CLOSE_DATE,COST_TYPE) values (1014,'5.9元套餐',20,5.9,0.4,'0','5.9元20小时/月,超出部分0.4元/时',to_date('25-10月-13','DD-MON-RR'),null,null,'2');

insert into SERVICE (ID,ACCOUNT_ID,COST_ID,UNIX_HOST,OS_USERNAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE) values (1000000011,100000001,1015,'192.168.0.26','XXX0001','123456','0',to_date('10-3月 -09','DD-MON-RR'),null,null);
insert into SERVICE (ID,ACCOUNT_ID,COST_ID,UNIX_HOST,OS_USERNAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE) values (1000000012,100000002,1015,'192.168.0.26','XXX0002','123456','0',to_date('01-3月 -09','DD-MON-RR'),null,null);
insert into SERVICE (ID,ACCOUNT_ID,COST_ID,UNIX_HOST,OS_USERNAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE) values (1000000013,100000002,1017,'192.168.0.20','XXX0003','123456','0',to_date('01-3月 -09','DD-MON-RR'),null,null);
insert into SERVICE (ID,ACCOUNT_ID,COST_ID,UNIX_HOST,OS_USERNAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE) values (1000000014,100000003,1014,'192.168.0.23','XXX0004','123456','0',to_date('01-3月 -09','DD-MON-RR'),null,null);
insert into SERVICE (ID,ACCOUNT_ID,COST_ID,UNIX_HOST,OS_USERNAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE) values (1000000015,100000004,1017,'192.168.0.20','XXX0005','123456','0',to_date('13-3月 -10','DD-MON-RR'),null,null);
insert into SERVICE (ID,ACCOUNT_ID,COST_ID,UNIX_HOST,OS_USERNAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE) values (1000000016,100000005,1014,'192.168.0.23','XXX0006','123456','0',to_date('02-1月 -11','DD-MON-RR'),null,null);
insert into SERVICE (ID,ACCOUNT_ID,COST_ID,UNIX_HOST,OS_USERNAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE) values (1000000017,100000006,1018,'192.168.0.26','XXX0007','123456','0',to_date('10-2月 -12','DD-MON-RR'),null,null);
insert into SERVICE (ID,ACCOUNT_ID,COST_ID,UNIX_HOST,OS_USERNAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE) values (1000000018,100000007,1019,'192.168.0.20','XXX0008','123456','0',to_date('21-2月 -12','DD-MON-RR'),null,null);
insert into SERVICE (ID,ACCOUNT_ID,COST_ID,UNIX_HOST,OS_USERNAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE) values (1000000019,100000001,1014,'192.168.0.20','XXX0009','123456','0',to_date('10-2月 -12','DD-MON-RR'),null,null);
insert into SERVICE (ID,ACCOUNT_ID,COST_ID,UNIX_HOST,OS_USERNAME,LOGIN_PASSWD,STATUS,CREATE_DATE,PAUSE_DATE,CLOSE_DATE) values (1000000020,100000006,1019,'192.168.0.20','XXX0010','123456','0',to_date('11-2月 -12','DD-MON-RR'),null,null);

insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000024,1000000011,'192.168.172.4','192.168.0.26','XXX0001',null,null,to_date('11-3月 -09','DD-MON-RR'),3610,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000025,1000000011,'192.168.172.4','192.168.0.26','XXX0001',null,null,to_date('13-3月 -09','DD-MON-RR'),10800,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000026,1000000011,'192.168.172.4','192.168.0.26','XXX0001',null,null,to_date('14-3月 -09','DD-MON-RR'),10800,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000027,1000000011,'192.168.172.4','192.168.0.26','XXX0001',null,null,to_date('15-3月 -09','DD-MON-RR'),32400,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000028,1000000011,'192.168.172.4','192.168.0.26','XXX0001',null,null,to_date('18-3月 -09','DD-MON-RR'),36000,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000029,1000000011,'192.168.172.4','192.168.0.26','XXX0001',null,null,to_date('20-3月 -09','DD-MON-RR'),36000,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000030,1000000013,'192.168.160.231','192.168.0.20','XXX003',null,null,to_date('11-3月 -09','DD-MON-RR'),18050,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000031,1000000013,'192.168160.231','192.168.0.20','XXX003',null,null,to_date('14-3月 -09','DD-MON-RR'),54000,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000032,1000000013,'192.168.160.231','192.168.0.20','XXX003',null,null,to_date('15-3月 -09','DD-MON-RR'),16200,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000033,1000000013,'192.168.160.231','192.168.0.20','XXX003',null,null,to_date('18-3月 -09','DD-MON-RR'),180000,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000034,1000000013,'192.168.160.231','192.168.0.20','XXX003',null,null,to_date('20-3月 -09','DD-MON-RR'),180000,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000035,1000000013,'192.168.160.231','192.168.0.20','XXX003',null,null,to_date('13-3月 -09','DD-MON-RR'),54000,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000036,1000000012,'192.168.160.231','192.168.0.26','huangr',null,null,to_date('11-3月 -09','DD-MON-RR'),75600,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000037,1000000012,'192.168.160.231','192.168.0.26','huangr',null,null,to_date('13-3月 -09','DD-MON-RR'),3600,null);
insert into SERVICE_DETAIL (ID,SERVICE_ID,CLIENT_HOST,UNIX_HOST,OS_USERNAME,PID,LOGIN_TIME,LOGOUT_TIME,DURATION,COST) values (10000000038,1000000012,'192.168160.231','192.168.0.26','huangr',null,null,to_date('14-3月 -09','DD-MON-RR'),7200,null);

--
